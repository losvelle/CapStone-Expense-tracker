{"ast":null,"code":"var _jsxFileName = \"/Users/carlos/Documents/PerScholas/expense/app/src/Expsenses.js\";\nimport React, { Component } from 'react';\nimport AppNav from './AppNav';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport './App.css';\nimport { Table, Container, Input, Button, Label, FormGroup, Form } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport Moment from 'react-moment';\n\nclass Expsenses extends Component {\n  // {\n  //   \"id\": 100,\n  //   \"expensedate\": \"2019-06-16T17:00:00Z\",\n  //   \"description\": \"New York Business Trip\",\n  //   \"location\": \"New York\",\n  //   \"category\": {\n  //   \"id\": 1,\n  //   \"name\": \"Travel\"\n  //   }\n  //   },\n  constructor(props) {\n    super(props);\n    this.emptyItem = {\n      description: '',\n      expensedate: new Date(),\n      id: 104,\n      location: '',\n      category: {\n        id: 1,\n        name: 'Travel'\n      }\n    };\n    this.state = {\n      isLoading: false,\n      Categories: [],\n      Expsenses: [],\n      date: new Date(),\n      item: this.emptyItem\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n  }\n\n  async handleSubmit(event) {\n    const item = this.state.item;\n    await fetch(`/api/expenses`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    });\n    event.preventDefault();\n    this.props.history.push(\"/expenses\");\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    let item = { ...this.state.item\n    };\n    item[name] = value;\n    this.setState({\n      item\n    });\n    console.log(item);\n  }\n\n  handleDateChange(date) {\n    let item = { ...this.state.item\n    };\n    item.expensedate = date;\n    this.setState({\n      item\n    });\n  }\n\n  async remove(id) {\n    await fetch(`/api/expenses/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      let updatedExpenses = [...this.state.Expsenses].filter(i => i.id !== id);\n      this.setState({\n        Expsenses: updatedExpenses\n      });\n    });\n  }\n\n  async componentDidMount() {\n    const response = await fetch('/api/categories');\n    const body = await response.json();\n    this.setState({\n      Categories: body,\n      isLoading: false\n    });\n    const responseExp = await fetch('/api/expenses');\n    const bodyExp = await responseExp.json();\n    this.setState({\n      Expsenses: bodyExp,\n      isLoading: false\n    });\n    console.log(bodyExp);\n  }\n\n  render() {\n    const title = /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 22\n      }\n    }, \"Add Expense\");\n    const {\n      Categories\n    } = this.state;\n    const {\n      Expsenses,\n      isLoading\n    } = this.state;\n    if (isLoading) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 20\n      }\n    }, \"Loading....\");\n    let optionList = Categories.map(category => /*#__PURE__*/React.createElement(\"option\", {\n      value: category.id,\n      key: category.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, category.name));\n    let rows = Expsenses.map(expense => /*#__PURE__*/React.createElement(\"tr\", {\n      key: expense.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, expense.description), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, expense.location), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Moment, {\n      date: expense.expensedate,\n      format: \"YYYY/MM/DD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, expense.category.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      color: \"danger\",\n      onClick: () => this.remove(expense.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, \"Delete\"))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AppNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, title, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"description\",\n      name: \"description\",\n      id: \"description\",\n      onChange: this.handleChange,\n      autoComplete: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, optionList)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"city\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n      selected: this.state.item.expensedate,\n      onChange: this.handleDateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"col-md-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"location\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"location\",\n      id: \"location\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 25\n      }\n    }, \"Save\"), ' ', /*#__PURE__*/React.createElement(Button, {\n      color: \"secondary\",\n      tag: Link,\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }, \"Cancel\")))), '', /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, \"Expense List\"), /*#__PURE__*/React.createElement(Table, {\n      className: \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      width: \"30%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, \" Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, \" Category\"), /*#__PURE__*/React.createElement(\"th\", {\n      width: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, rows))), \"}\");\n  }\n\n}\n\nexport default Expsenses;","map":{"version":3,"sources":["/Users/carlos/Documents/PerScholas/expense/app/src/Expsenses.js"],"names":["React","Component","AppNav","DatePicker","Table","Container","Input","Button","Label","FormGroup","Form","Link","Moment","Expsenses","constructor","props","emptyItem","description","expensedate","Date","id","location","category","name","state","isLoading","Categories","date","item","handleSubmit","bind","handleChange","handleDateChange","event","fetch","method","headers","body","JSON","stringify","preventDefault","history","push","target","value","setState","console","log","remove","then","updatedExpenses","filter","i","componentDidMount","response","json","responseExp","bodyExp","render","title","optionList","map","rows","expense"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,4CAAP;AACA,OAAO,WAAP;AACA,SAASC,KAAT,EAAeC,SAAf,EAAyBC,KAAzB,EAA+BC,MAA/B,EAAsCC,KAAtC,EAA6CC,SAA7C,EAAwDC,IAAxD,QAAmE,YAAnE;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,cAAnB;;AAEA,MAAMC,SAAN,SAAwBZ,SAAxB,CAAkC;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWEa,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AADgB,SATlBC,SASkB,GATN;AACRC,MAAAA,WAAW,EAAG,EADN;AAERC,MAAAA,WAAW,EAAG,IAAIC,IAAJ,EAFN;AAGRC,MAAAA,EAAE,EAAC,GAHK;AAIRC,MAAAA,QAAQ,EAAG,EAJH;AAKRC,MAAAA,QAAQ,EAAG;AAACF,QAAAA,EAAE,EAAC,CAAJ;AAAQG,QAAAA,IAAI,EAAC;AAAb;AALH,KASM;AAGhB,SAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,KADA;AAEXC,MAAAA,UAAU,EAAC,EAFA;AAGXb,MAAAA,SAAS,EAAG,EAHD;AAIXc,MAAAA,IAAI,EAAE,IAAIR,IAAJ,EAJK;AAKXS,MAAAA,IAAI,EAAG,KAAKZ;AALD,KAAb;AAQC,SAAKa,YAAL,GAAmB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAnB;AACA,SAAKC,YAAL,GAAmB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAAnB;AACA,SAAKE,gBAAL,GAAuB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAvB;AAEF;;AAEiB,QAAZD,YAAY,CAACI,KAAD,EAAO;AAEvB,UAAML,IAAI,GAAG,KAAKJ,KAAL,CAAWI,IAAxB;AAGA,UAAMM,KAAK,CAAE,eAAF,EAAkB;AAC3BC,MAAAA,MAAM,EAAG,MADkB;AAE3BC,MAAAA,OAAO,EAAG;AACR,kBAAU,kBADF;AAER,wBAAgB;AAFR,OAFiB;AAM3BC,MAAAA,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAeX,IAAf;AANoB,KAAlB,CAAX;AASAK,IAAAA,KAAK,CAACO,cAAN;AACA,SAAKzB,KAAL,CAAW0B,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AACD;;AAGDX,EAAAA,YAAY,CAACE,KAAD,EAAO;AACjB,UAAMU,MAAM,GAAEV,KAAK,CAACU,MAApB;AACA,UAAMC,KAAK,GAAED,MAAM,CAACC,KAApB;AACA,UAAMrB,IAAI,GAAGoB,MAAM,CAACpB,IAApB;AACA,QAAIK,IAAI,GAAC,EAAC,GAAG,KAAKJ,KAAL,CAAWI;AAAf,KAAT;AACAA,IAAAA,IAAI,CAACL,IAAD,CAAJ,GAAaqB,KAAb;AACA,SAAKC,QAAL,CAAc;AAACjB,MAAAA;AAAD,KAAd;AACAkB,IAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ;AACD;;AAGDI,EAAAA,gBAAgB,CAACL,IAAD,EAAM;AACpB,QAAIC,IAAI,GAAC,EAAC,GAAG,KAAKJ,KAAL,CAAWI;AAAf,KAAT;AACAA,IAAAA,IAAI,CAACV,WAAL,GAAkBS,IAAlB;AACA,SAAKkB,QAAL,CAAc;AAACjB,MAAAA;AAAD,KAAd;AAED;;AAOW,QAANoB,MAAM,CAAC5B,EAAD,EAAI;AACZ,UAAMc,KAAK,CAAE,iBAAgBd,EAAG,EAArB,EAAyB;AAClCe,MAAAA,MAAM,EAAE,QAD0B;AAElCC,MAAAA,OAAO,EAAG;AACR,kBAAW,kBADH;AAER,wBAAiB;AAFT;AAFwB,KAAzB,CAAL,CAOHa,IAPG,CAOE,MAAM;AACZ,UAAIC,eAAe,GAAG,CAAC,GAAG,KAAK1B,KAAL,CAAWX,SAAf,EAA0BsC,MAA1B,CAAiCC,CAAC,IAAIA,CAAC,CAAChC,EAAF,KAASA,EAA/C,CAAtB;AACA,WAAKyB,QAAL,CAAc;AAAChC,QAAAA,SAAS,EAAGqC;AAAb,OAAd;AACD,KAVK,CAAN;AAYH;;AAGsB,QAAjBG,iBAAiB,GAAG;AAItB,UAAMC,QAAQ,GAAE,MAAMpB,KAAK,CAAC,iBAAD,CAA3B;AACA,UAAMG,IAAI,GAAE,MAAMiB,QAAQ,CAACC,IAAT,EAAlB;AACA,SAAKV,QAAL,CAAc;AAACnB,MAAAA,UAAU,EAAGW,IAAd;AAAqBZ,MAAAA,SAAS,EAAE;AAAhC,KAAd;AAGA,UAAM+B,WAAW,GAAE,MAAMtB,KAAK,CAAC,eAAD,CAA9B;AACA,UAAMuB,OAAO,GAAG,MAAMD,WAAW,CAACD,IAAZ,EAAtB;AACA,SAAKV,QAAL,CAAc;AAAChC,MAAAA,SAAS,EAAG4C,OAAb;AAAuBhC,MAAAA,SAAS,EAAE;AAAlC,KAAd;AACAqB,IAAAA,OAAO,CAACC,GAAR,CAAYU,OAAZ;AAEH;;AAMDC,EAAAA,MAAM,GAAG;AACL,UAAMC,KAAK,gBAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAb;AACA,UAAM;AAACjC,MAAAA;AAAD,QAAc,KAAKF,KAAzB;AACA,UAAM;AAACX,MAAAA,SAAD;AAAWY,MAAAA;AAAX,QAAwB,KAAKD,KAAnC;AAGA,QAAIC,SAAJ,EACI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAP;AAIJ,QAAImC,UAAU,GACNlC,UAAU,CAACmC,GAAX,CAAiBvC,QAAD,iBACZ;AAAQ,MAAA,KAAK,EAAEA,QAAQ,CAACF,EAAxB;AAA4B,MAAA,GAAG,EAAEE,QAAQ,CAACF,EAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACaE,QAAQ,CAACC,IADtB,CADJ,CADR;AAOA,QAAIuC,IAAI,GACJjD,SAAS,CAACgD,GAAV,CAAeE,OAAO,iBACpB;AAAI,MAAA,GAAG,EAAEA,OAAO,CAAC3C,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK2C,OAAO,CAAC9C,WAAb,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK8C,OAAO,CAAC1C,QAAb,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAE0C,OAAO,CAAC7C,WAAtB;AAAmC,MAAA,MAAM,EAAC,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAJ,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK6C,OAAO,CAACzC,QAAR,CAAiBC,IAAtB,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,IAAb;AAAkB,MAAA,KAAK,EAAC,QAAxB;AAAiC,MAAA,OAAO,EAAE,MAAM,KAAKyB,MAAL,CAAYe,OAAO,CAAC3C,EAApB,CAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CALF,CADF,CADJ;AAeA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKuC,KADL,eAGI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAK9B,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,aAAZ;AAA0B,MAAA,IAAI,EAAC,aAA/B;AAA6C,MAAA,EAAE,EAAC,aAAhD;AACI,MAAA,QAAQ,EAAE,KAAKE,YADnB;AACiC,MAAA,YAAY,EAAC,MAD9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADA,eAQA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,MAAA,QAAQ,EAAE,KAAKA,YAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACS6B,UADT,CAFJ,CARA,eAgBA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,oBAAC,UAAD;AAAe,MAAA,QAAQ,EAAE,KAAKpC,KAAL,CAAWI,IAAX,CAAgBV,WAAzC;AAAuD,MAAA,QAAQ,EAAE,KAAKc,gBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAhBA,eAqBA;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,eAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEA,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,UAAxB;AAAmC,MAAA,EAAE,EAAC,UAAtC;AAAiD,MAAA,QAAQ,EAAE,KAAKD,YAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,CADJ,CArBA,eA4BA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAwB,MAAA,IAAI,EAAC,QAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EACwD,GADxD,eAEI,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA0B,MAAA,GAAG,EAAEpB,IAA/B;AAAqC,MAAA,EAAE,EAAC,GAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CA5BA,CAHJ,CAFJ,EAyCD,EAzCC,eA0CE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,eAKE;AAAI,MAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,CADF,CADA,eAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACImD,IADJ,CAVA,CAFF,CA1CF,MADJ;AAmEH;;AAzN6B;;AA4NlC,eAAejD,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport AppNav from './AppNav';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport './App.css';\nimport { Table,Container,Input,Button,Label, FormGroup, Form} from 'reactstrap';\nimport {Link} from 'react-router-dom';\nimport Moment from 'react-moment';\n\nclass Expsenses extends Component {\n\n  // {\n  //   \"id\": 100,\n  //   \"expensedate\": \"2019-06-16T17:00:00Z\",\n  //   \"description\": \"New York Business Trip\",\n  //   \"location\": \"New York\",\n  //   \"category\": {\n  //   \"id\": 1,\n  //   \"name\": \"Travel\"\n  //   }\n  //   },\n \n    emptyItem = {\n        description : '' ,\n        expensedate : new Date(),\n        id:104,\n        location : '',\n        category : {id:1 , name:'Travel'}\n    }\n\n    \n    constructor(props){\n      super(props)\n\n      this.state = { \n        isLoading :false,\n        Categories:[],\n        Expsenses : [],\n        date :new Date(),\n        item : this.emptyItem\n       }\n\n       this.handleSubmit= this.handleSubmit.bind(this);\n       this.handleChange= this.handleChange.bind(this);\n       this.handleDateChange= this.handleDateChange.bind(this);\n\n    } \n\n    async handleSubmit(event){\n     \n      const item = this.state.item;\n    \n\n      await fetch(`/api/expenses`, {\n        method : 'POST',\n        headers : {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body : JSON.stringify(item),\n      });\n      \n      event.preventDefault();\n      this.props.history.push(\"/expenses\");\n    }\n\n\n    handleChange(event){\n      const target= event.target;\n      const value= target.value;\n      const name = target.name;\n      let item={...this.state.item};\n      item[name] = value;\n      this.setState({item});\n      console.log(item);\n    }\n\n\n    handleDateChange(date){\n      let item={...this.state.item};\n      item.expensedate= date;\n      this.setState({item});\n    \n    }\n\n\n\n\n\n\n    async remove(id){\n        await fetch(`/api/expenses/${id}` , {\n          method: 'DELETE' ,\n          headers : {\n            'Accept' : 'application/json',\n            'Content-Type' : 'application/json'\n          }\n\n        }).then(() => {\n          let updatedExpenses = [...this.state.Expsenses].filter(i => i.id !== id);\n          this.setState({Expsenses : updatedExpenses});\n        });\n\n    }\n\n\n    async componentDidMount() {\n \n     \n\n        const response= await fetch('/api/categories');\n        const body= await response.json();\n        this.setState({Categories : body , isLoading :false});\n\n\n        const responseExp= await fetch('/api/expenses');\n        const bodyExp = await responseExp.json();\n        this.setState({Expsenses : bodyExp , isLoading :false});\n        console.log(bodyExp);\n\n    }\n\n\n\n\n\n    render() { \n        const title =<h3>Add Expense</h3>;\n        const {Categories} =this.state;\n        const {Expsenses,isLoading} = this.state;\n        \n\n        if (isLoading)\n            return(<div>Loading....</div>)\n        \n\n\n        let optionList  =\n                Categories.map( (category) =>\n                    <option value={category.id} key={category.id}>\n                                {category.name} \n                    </option>\n                )\n        \n        let rows=\n            Expsenses.map( expense =>\n              <tr key={expense.id}>\n                <td>{expense.description}</td>\n                <td>{expense.location}</td>\n                <td><Moment date={expense.expensedate} format=\"YYYY/MM/DD\"/></td>\n                <td>{expense.category.name}</td>\n                <td><Button size=\"sm\" color=\"danger\" onClick={() => this.remove(expense.id)}>Delete</Button></td>\n\n              </tr>\n\n\n            )\n        \n\n        return (\n            <div>\n                <AppNav/>\n                <Container>\n                    {title}\n                    \n                    <Form onSubmit={this.handleSubmit}>\n                    <FormGroup>\n                        <Label for=\"description\">Title</Label>\n                        <Input type=\"description\" name=\"description\" id=\"description\" \n                            onChange={this.handleChange} autoComplete=\"name\"/>\n                    \n                    </FormGroup>\n\n                    <FormGroup>\n                        <Label for=\"category\" >Category</Label>\n                        <select onChange={this.handleChange}>\n                                {optionList}\n                        </select>\n                    \n                    </FormGroup>\n\n                    <FormGroup>\n                        <Label for=\"city\">Date</Label>\n                        <DatePicker    selected={this.state.item.expensedate}  onChange={this.handleDateChange} />\n                    </FormGroup>\n\n                    <div className=\"row\">\n                        <FormGroup className=\"col-md-4 mb-3\">\n                        <Label for=\"location\">Location</Label>\n                        <Input type=\"text\" name=\"location\" id=\"location\" onChange={this.handleChange}/>\n                        </FormGroup>\n                      \n                    </div>\n                    <FormGroup>\n                        <Button color=\"primary\" type=\"submit\">Save</Button>{' '}\n                        <Button color=\"secondary\" tag={Link} to=\"/\">Cancel</Button>\n                    </FormGroup>\n                    </Form>\n                </Container>\n              \n\n          {''}\n              <Container>\n                <h3>Expense List</h3>\n                <Table className=\"mt-4\">\n                <thead>\n                  <tr>\n                    <th width=\"30%\">Description</th>\n                    <th width=\"10%\">Location</th>\n                    <th> Date</th>\n                    <th> Category</th>\n                    <th width=\"10%\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                   {rows}\n                </tbody>\n\n                </Table>\n              </Container>\n\n          }\n\n        </div>\n\n        );\n    }\n}\n \nexport default Expsenses;\n"]},"metadata":{},"sourceType":"module"}